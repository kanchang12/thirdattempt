<!DOCTYPE html>
<html>
<head>
    <title>OpenAI Chat API Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>OpenAI Chat API Example</h2>
    <form id="chatForm">
        <label for="user_input">User Input:</label>
        <input type="text" id="user_input" name="user_input">
        <button type="submit">Submit</button>
    </form>
    
    <div id="responseContainer"></div>

   <script>
        function submitForm() {
            var userInput = document.getElementById('user_input').value;
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/submit', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    document.getElementById('responseContainer').innerText = response.response;
                } else {
                    document.getElementById('responseContainer').innerText = 'Error: ' + xhr.statusText;
                }
            };
            xhr.onerror = function() {
                document.getElementById('responseContainer').innerText = 'Request failed.';
            };
            xhr.send('user_input=' + encodeURIComponent(userInput));
        }
    </script>
</body>
</html>
