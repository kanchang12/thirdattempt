<!DOCTYPE html>
<html>
<head>
    <title>OpenAI Chat API Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Replace "path/to/script.js" with the actual path to your script -->
</head>
<body>

    <h2>OpenAI Chat API Example</h2>
    <form id="chatForm">
        <label for="user_input">User Input:</label>
        <input type="text" id="user_input" name="user_input">
        <button type="button" onclick="submitForm()">Submit</button> <!-- Call submitForm function on button click -->
    </form>
    
    <div id="responseContainer"></div>

    <script>
        
        function submitForm() {
    // Get user input
    var userInput = document.getElementById('user_input').value;

    // Prepare the request payload
    var formData = new FormData();
    formData.append('user_input', userInput);

    // Send POST request to Flask backend
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/submit', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

    // Define callback function to handle response
    xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                document.getElementById('responseContainer').innerHTML = '<p>' + response.response + '</p>';
            } else {
                console.error('Error:', xhr.statusText);
                document.getElementById('responseContainer').innerHTML = '<p>Error: ' + xhr.statusText + '</p>';
            }
        }
    };

    // Send the form data
    xhr.send(formData);
}
    </script>
</body>
</html>
