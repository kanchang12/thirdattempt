<!DOCTYPE html>
<html>
<head>
    <title>Upload CSV File</title>
</head>
<body>
    <h2>Upload a CSV File</h2>
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" id="fileInput" name="file" accept=".csv">
        <br><br>
        <label for="input">Input:</label>
        <input type="text" id="textInput" name="input">
        <br><br>
        <button type="button" onclick="submitForm()">Submit</button>
    </form>

    <div id="responseContainer">
        <!-- Response will be displayed here -->
    </div>

    <script>
        function submitForm() {
    // Prepare data to be sent as JSON
    let formData = {
        file: document.getElementById('fileInput').files[0],
        input: document.getElementById('textInput').value
    };

    // Send POST request with JSON data
    fetch('/submit', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'  // Set Content-Type header to JSON
        },
        body: JSON.stringify(formData)  // Convert formData to JSON string
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`Request failed with status ${response.status}`);
        }
        return response.json();
    })
    .then(data => {
        // Process and display response
        let responseContainer = document.getElementById('responseContainer');
        responseContainer.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
    })
    .catch(error => {
        console.error('Error:', error.message);
        let responseContainer = document.getElementById('responseContainer');
        responseContainer.innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
    });
}

    </script>
</body>
</html>
